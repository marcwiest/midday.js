<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>midday.js — Demo</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>

  <header data-midday="top">
    <nav>
      <div class="logo">midday.js</div>
      <ul>
        <li><a href="#hero">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#work">Work</a></li>
        <li><a href="#contact">Contact</a></li>
      </ul>
    </nav>
  </header>

  <nav class="dock" data-midday="bottom">
    <div class="dock-inner">
      <span>Scroll position</span>
    </div>
  </nav>

  <section id="hero" class="hero" data-midday-section="dark">
    <h2>Hero Section</h2>
    <p>Both header and dock use the "dark" variant here (no target — applies to all).</p>
  </section>

  <section id="about" class="content">
    <h2>About Section</h2>
    <p>No data-midday-section attribute — both bars fall back to their "default" variant.</p>
  </section>

  <section class="accent-section" data-midday-section="accent" data-midday-target="top">
    <h2>Accent Section</h2>
    <p>Only the top header changes to "accent" here. The bottom dock stays default (target="top").</p>
  </section>

  <section class="light-section">
    <h2>Light Section</h2>
    <p>No variant specified. Both bars return to default.</p>
  </section>

  <section class="dark-section" data-midday-section="inverted" data-midday-target="top bottom">
    <h2>Inverted Section</h2>
    <p>Both bars change to "inverted" — targeting both explicitly (target="top bottom").</p>
  </section>

  <section id="work" class="content">
    <h2>Work Section</h2>
    <p>Back to the default variant again. Scroll up and down to see the transitions.</p>
  </section>

  <section class="hero" data-midday-section="dark" data-midday-target="bottom">
    <h2>Bottom-only Dark Section</h2>
    <p>Only the bottom dock changes to "dark" here. The top header stays default (target="bottom").</p>
  </section>

  <section id="contact" class="light-section">
    <h2>Contact Section</h2>
    <p>Default variant. The footer of the demo page.</p>
  </section>

  <div class="controls">
    <button id="btn-refresh">Refresh</button>
    <button id="btn-destroy" class="destructive">Destroy</button>
    <button id="btn-init" style="display:none;">Re-init</button>
  </div>

  <script type="module">
    import { midday } from '../src/index.ts';

    let topInstance = midday(document.querySelector('[data-midday="top"]'), {
      onChange: (variants) => {
        console.log('Top:', variants);
      },
    });

    let bottomInstance = midday(document.querySelector('[data-midday="bottom"]'), {
      onChange: (variants) => {
        console.log('Bottom:', variants);
      },
    });

    document.getElementById('btn-refresh').addEventListener('click', () => {
      topInstance.refresh();
      bottomInstance.refresh();
      console.log('Refreshed');
    });

    document.getElementById('btn-destroy').addEventListener('click', () => {
      topInstance.destroy();
      bottomInstance.destroy();
      console.log('Destroyed');
      document.getElementById('btn-destroy').style.display = 'none';
      document.getElementById('btn-refresh').style.display = 'none';
      document.getElementById('btn-init').style.display = '';
    });

    document.getElementById('btn-init').addEventListener('click', () => {
      topInstance = midday(document.querySelector('[data-midday="top"]'), {
        onChange: (variants) => {
          console.log('Top:', variants);
        },
      });
      bottomInstance = midday(document.querySelector('[data-midday="bottom"]'), {
        onChange: (variants) => {
          console.log('Bottom:', variants);
        },
      });
      console.log('Re-initialized');
      document.getElementById('btn-destroy').style.display = '';
      document.getElementById('btn-refresh').style.display = '';
      document.getElementById('btn-init').style.display = 'none';
    });
  </script>

</body>
</html>
